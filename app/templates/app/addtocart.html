{% extends 'app/base.html' %}
{% load static %}
{% block title %}Cart{% endblock title %}
{% block main-content %}
<div class="container my-5">
 <div class="row">
  <h1 class="text-center mb-5">Shopping Cart</h1>
  
  <!-- Cart Items -->
  <div class="col-sm-8">
   <div class="card">
    <div class="card-body">
     <h3>Cart</h3>
     {% for cart in carts %}
     <hr>
     <div class="row cart-item" id="cart-item-{{ cart.product.id }}">
      
      <!-- Product Image -->
      <div class="col-sm-3 text-center align-self-center">
       <img src="{{ cart.product.product_image.url }}" alt="{{ cart.product.title }}" 
            class="img-fluid img-thumbnail shadow-sm" height="150" width="150">
      </div>

      <!-- Product Details -->
      <div class="col-sm-9">
       <div>
        <h5>{{ cart.product.title }}</h5>
        <p class="mb-2 text-muted small">{{ cart.product.description }}</p>

        <!-- Quantity Controls -->
        <div class="my-3">
         <label>Quantity:</label>
         <a class="minus-cart btn" pid="{{ cart.product.id }}"><i class="fas fa-minus-square fa-lg"></i></a>
         <span id="quantity-{{ cart.product.id }}">{{ cart.quantity }}</span>
         <a class="plus-cart btn" pid="{{ cart.product.id }}"><i class="fas fa-plus-square fa-lg"></i></a>
        </div>

        <!-- Actions -->
        <div class="d-flex justify-content-between">
         <button class="btn btn-sm btn-secondary remove-cart" pid="{{ cart.product.id }}">Remove item</button>
         <p class="mb-0"><strong>&pound;{{ cart.product.discounted_price|floatformat:2 }}</strong></p>
        </div>
       </div>
      </div>
     </div>
     {% empty %}
     <p>Your cart is empty.</p>
     {% endfor %}
    </div>
   </div>
  </div>

  <!-- Total Amount -->
  <div class="col-sm-4">
   <div class="card">
    <div class="card-body">
     <h3>The Total Amount</h3>
     <ul class="list-group">
      <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 pb-0">
       Amount <span id="amount">&pound;{{ amount|floatformat:2 }}</span>
      </li>
      <li class="list-group-item d-flex justify-content-between align-items-center px-0">
       Shipping <span id="shipping-amount">&pound;{{ shipping_amount|floatformat:2 }}</span>
      </li>
      <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 mb-3">
       <div><strong>Total</strong> <small>(including VAT)</small></div>
       <span id="totalamount"><strong>&pound;{{ totalamount|floatformat:2 }}</strong></span>
      </li>
     </ul>
     <div class="d-grid">
      <a href="{% url 'checkout' %}" class="btn btn-primary">Place Order</a>
     </div>
    </div>
   </div>
  </div>
 </div>
</div>

<!-- Payment Methods -->
<div class="container mt-4">
 <div class="row">
  <div class="col-sm-8">
   <div class="card">
    <div class="card-body">
     <h5 class="mb-4">We accept</h5>
     <img src="{% static 'app/images/payment.png' %}" alt="Payment Methods" class="img-fluid">
    </div>
   </div>
  </div>
 </div>
</div>
{% endblock main-content %}
